databaseChangeLog:
- changeSet:
    id: 1756996899920-1
    author: pasha (generated)
    changes:
    - createTable:
        columns:
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: my_card_pkey
            name: id
            type: VARCHAR(255)
        - column:
            name: balance
            type: numeric(38, 2)
        - column:
            name: expiry_date
            type: date
        - column:
            constraints:
              nullable: false
            name: number
            type: VARCHAR(19)
        - column:
            name: status
            type: VARCHAR(255)
        - column:
            constraints:
              nullable: false
            name: version
            type: INTEGER
        - column:
            name: owner_id
            type: VARCHAR(255)
        tableName: my_card
- changeSet:
    id: 1756996899920-2
    author: pasha (generated)
    changes:
    - createTable:
        columns:
        - column:
            constraints:
              nullable: false
              primaryKey: true
              primaryKeyName: my_user_pkey
            name: id
            type: VARCHAR(255)
        - column:
            name: email
            type: VARCHAR(255)
        - column:
            name: first_name
            type: VARCHAR(255)
        - column:
            name: is_blocked
            type: BOOLEAN
        - column:
            name: last_name
            type: VARCHAR(255)
        - column:
            name: password
            type: VARCHAR(255)
        - column:
            name: role
            type: VARCHAR(255)
        tableName: my_user
- changeSet:
    id: 1756996899920-3
    author: pasha (generated)
    changes:
    - addUniqueConstraint:
        columnNames: number
        constraintName: ukfnt7lliat0v6vu8pv7rn40ao2
        tableName: my_card
- changeSet:
    id: 1756996899920-4
    author: pasha (generated)
    changes:
    - addForeignKeyConstraint:
        baseColumnNames: owner_id
        baseTableName: my_card
        constraintName: fkcji8iq8q7f3224f2plchh066x
        deferrable: false
        initiallyDeferred: false
        onDelete: NO ACTION
        onUpdate: NO ACTION
        referencedColumnNames: id
        referencedTableName: my_user
        validate: true
- changeSet:
      id: 1756996899920-5
      author: pasha
      changes:
          - createIndex:
                indexName: idx_my_card_status
                tableName: my_card
                columns:
                    - column:
                          name: status
          - createIndex:
                indexName: idx_my_card_balance
                tableName: my_card
                columns:
                    - column:
                          name: balance
          - createIndex:
                indexName: idx_my_user_role
                tableName: my_user
                columns:
                    - column:
                          name: role
          - createIndex:
                indexName: idx_my_user_is_blocked
                tableName: my_user
                columns:
                    - column:
                          name: is_blocked
- changeSet:
      id: 1756996899920-6
      author: pasha
      changes:
          - sql: |
                CREATE EXTENSION IF NOT EXISTS pg_trgm;
                CREATE INDEX idx_my_card_id_trgm ON my_card USING gin (id gin_trgm_ops);
                CREATE INDEX idx_my_card_owner_trgm ON my_card USING gin (owner_id gin_trgm_ops);
                CREATE INDEX idx_my_user_first_name_trgm ON my_user USING gin (lower(first_name) gin_trgm_ops);
                CREATE INDEX idx_my_user_last_name_trgm ON my_user USING gin (lower(last_name) gin_trgm_ops);
                CREATE INDEX idx_my_user_email_trgm ON my_user USING gin (lower(email) gin_trgm_ops);
